# JSON APIS

## JSON とは

JSON は JavaScript Object Notation の略で軽量なデータ交換フォーマットである。

人間にとって読み書きが容易で、コンピュータにとっても簡単にパースや生成が行える。

また、プログラミング言語に問わず利用できるといった特徴がある。

## JSON が生まれた背景

JSON 誕生以前は**XML**というデータ記述言語が主流だった。
XML は HTML と同様にデータをタグで挟む用に書く必要がある。
例えば以下のような感じ。

```
<?xml version="1.0" encoding="utf-8"?>
<data>
  <item>
    <name>田中</name>
    <age>26</age>
  </item>
  <item>
    <name>鈴木</name>
    <age>23</age>
  </item>
</data>
```

XML はタグ分だけデータ量が多くなるので、処理のパフォーマンスが下がる問題がある。

この問題を解決するために生まれたのが JSON。

JSON 形式ではデータをタグではなく、テキストで記載するため、データ量が XML より少なく済み、パフォーマンス低下の可能性も下がる。

先程の例を JSON 形式で表すと以下のようになる。

```
[
  {"name" : "田中", "age" : 26},
  {"name" : "鈴木", "age" : 23}
]
```

## JSON の構文

### JSON のキホン

JSON は`{}`のオブジェクトの中に`"key": "value"`のペアのデータを設定する。
また、このペアのことを**プロパティ**と呼ぶ。

例としては以下のような感じ。

データが 1 つの場合

```
{ "名前": "値" }
```

データが複数の場合

```
{
  "名前1": "値1",
  "名前2": "値2",
  "名前3": "値3"
}
```

### JSON で使える型

JSON のプロパティで扱えるデータ型は以下の種類がある。

```
{
  "オブジェクト": {
    "数値": 1,
    "文字列": "pikawaka",
    "真偽値": true,
    "null値": null,
    "配列": [1, 2, 3]
  }
}
```

### JSON で使える型 -数値-

プロパティの値に`123`などの数値を指定する。

数値型を扱うときの注意点は以下の２つ。

- 0 から始まる数値は扱えない
- 小数点から始まる数値は扱えない

数値型の例は以下の通り。

```
# 正しい例
{
  "age": 19
}

# 扱えない例
{
  "error1": 0123,
  "error2": 0.123
}
```

### JSON で使える型 -文字列-

プロパティの値に`""`で囲った文字列を指定する。

文字列型を扱う時の注意点は**文字列の中に`""`や `\`を使うことはできない**ということ。

特殊文字を扱う場合はエスケープを使用する。

文字列型の例は以下の通り。

```
# 正しい例
{
  "text": "こんにちは。私は田中です。"
}

# 扱えない例 -> 改行は認識されない
{
  "text": "こんにちは。\n私は田中です。"
}

# 改行を扱う場合
{
  "text": "こんにちは。\\n私は田中です。"
}
```

### JSON で使える型 -真偽値-

プロパティの値に`true`や`false`を指定する。

真偽値型を大文字で指定するとエラーになるので注意。

例は以下の通り。

```
# 正しい例
{
  "is_empty": true,
  "is_active": false
}

# 扱えない例
{
  "is_empty": TRUE,
  "is_active": FALSE
}
```

### JSON で使える型 -null 値-

プロパティの値に`null`を指定する。

null 値型を大文字で指定するとエラーになるので注意。

例は以下の通り。

```
# 正しい例
{
  "name": null
}

# 扱えない例
{
  "name": NULL
}
```

### JSON で使える型 -オブジェクト-

JSON はプロパティの値としても`オブジェクト{}`を使うことができる。

値にオブジェクトを使うことで、階層構造を表現することができる。

例は以下の通り。

```
{
  "Tanaka": {
    "age": 23,
    "address": "Tokyo",
    "email": "tanaka@gmail.com"
  },
  "Yamada": {
    "age": 28,
    "address": "Shizuoka",
    "email": "yamada@gmail.com"
  }
}
```

### JSON で使える型 -配列-

プロパティの値に`配列[]`を指定する。

配列の要素にはここまで説明したデータ型が全て扱える。

例えば、以下の例のように配列の要素に`オブジェクト{}`を使うことでオブジェクトのデータを順番に管理できるようになる。

```
{
  "users": [
    {"id": 1, "name": "Tanaka", "age":23 },
    {"id": 2, "name": "Yamada", "age":28 },
    {"id": 3, "name": "Suzuki", "age":26 }
  ]
}
```

## その他の JSON の注意点

- プロパティに関数、Symbol を含めることはできない
- 文字列と key は`""`で括る必要がある。`''`ではダメ！
- １つでもカンマやコロンが抜けるだけで無効な JSON になるので注意
  - 機械的に作る方が安全
  - JSONLint のようなフォーマッターで検査するのも有効

## 参考文献

MDN Web Docs | JSON データの操作
(最終閲覧日：2021 年 2 月 8 日）
https://developer.mozilla.org/ja/docs/Learn/JavaScript/Objects/JSON

Wikipedia | JavaScript Object Notation
(最終閲覧日：2021 年 2 月 8 日）
https://ja.wikipedia.org/wiki/JavaScript_Object_Notation

Zenn | 1 分で学ぶ JSON 入門
(最終閲覧日：2021 年 2 月 8 日）
https://zenn.dev/miumi/articles/75e3426e696155

Qiita | JSON とは結局なんなのか？
(最終閲覧日：2021 年 2 月 8 日）
https://qiita.com/momonoki1990/items/cd9a65498c2b16b0ed55

Pikawaka | 【JavaScript】ゼロから始める JSON 入門
(最終閲覧日：2021 年 2 月 8 日）
https://pikawaka.com/javascript/json
