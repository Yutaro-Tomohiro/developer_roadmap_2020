# インターネットの仕組み
## インターネットとは？
## LANとWAN
- LAN：**Local Area Network**の略
- WAN：**Wide Area Network**の略

つまり、LANは事業所など局地的な狭い範囲のネットワークを指し、LAN同士を繋ぐ(例：大阪本社と島根支社を繋ぐ)広域ネットワークをWANと呼ぶ。

### WANの通信技術とパケット
コンピュータがデータをやり取りするためには、それぞれを結ぶ通信路が必要となってくる。
複数のコンピュータを接続する通信方式の現在の主流はパケット交換方式と言う物である。

パケット交換方式とはパケットという単位に分割された通信データを交換機が適切な回線へと送り出すことで通信路を形成する方式のこと

パケットに分けるメリットはネットワークの帯域を分け合うことで通信路を占有しなくてもすむことである。通信路上を流せるデータ量は有限で、例えば100BASE-TXのネットワークだと１秒間に流せるのは100Mbitまでと決まっている。

そのため仮に500MBのデータを分割せずに通信路に流すと、100BASE-TXの場合は40秒間(4000Mbit ÷ 100Mbit)通信路を占有してしまい、誰もネットワークを利用できなくなってしまう。

### LANの接続形態
LANを構築するときに各コンピュータの接続形態をトポロジーと呼ぶ。
以下、３つが代表的なトポロジーである。

- スター型：ハブを中心に放射状に各コンピュータを接続する形態
- バス型：１本の基幹となるケーブルに各コンピュータを接続する形態
- リング型：リング状に各コンピュータを接続する形態

### イーサネットについて
イーサネットとは現在最も普及しているLANの規格のことで、IEEEによって標準化されており、接続形態や伝送速度で様々な規格に分かれている。

またイーサネットは CSMA/CD方式でネットワークを監視している。

### 無線LANとは？
無線LANとはケーブルを必要とせずに電波などを使って無線で通信を行うLANのこと。無線なので電波の届く範囲であれば自由に移動できる便利さがある反面、電波を盗聴される恐れもあるため通信を暗号化するなどのセキュリティ対策が必要となる。

### クライアントとサーバ
複数コンピュータの処理の形態にはいくつかあり、その中でも代表的な２つを紹介する。

|処理名|特徴|メリット|デメリット|
|--|--|--|--|
|集中処理|ホストコンピュータが集中的に処理して、他のコンピュータはそれにぶら下がる構成|データの一貫性を維持・管理しやすい<br>セキュリティの確保や運用管理が簡単|システムの拡張が大変<br>ホストコンピュータが壊れると全体も停止する|
|分散処理|複数のコンピュータに負荷を分散させて、それぞれで処理を行うようにする構成|システムの拡張が簡単<br>一部コンピュータの破損が全体に影響しない|データの一貫性の維持・管理が困難<br>セキュリティの確保や運用管理が大変|

以前まではコンピュータの性能などの制限から集中処理が主流だったが、最近ではコンピュータの性能が上がったことにより、クライアントサーバシステムという分散処理に集中処理の要素を取り組んだ携帯が主流になった。

クライアントサーバシステムとは集中的に管理した方が良い資源(ハードディスク領域など)やサービス(メールやデータベース)を提供するサーバと必要に応じてリクエストを投げるクライアントという２種類の役割に分けて処理を行う構成のことである。

クライアントとサーバはあくまで役割であり、サーバ自体がクライアントとして他のサーバに要求を出すこともあれば、一台のサーバマシンに複数のサーバ機能を兼任させることもある。

## プロトコルについて
### プロトコルとOSI基本参照モデル
プロトコルとはネットワークを通じてコンピュータ同士がやり取りするための約束事のことである。
プロトコルには様々な種類があり、形式が事細かに決まっている。それらを７階層に分けたものが**OSI参照モデル**である。

以下のような第1階層から第7階層まで全て組み合わせることで基本的にコンピュータ同士の通信が可能となる。

|階層数|階層名|特徴・担当|
|--|--|--|
|第7階層|アプリケーション層|具体的にどんなサービスを提供するか|
|第6階層|プレゼンテーション層|データの形式の管理|
|第5階層|セッション層|通信の開始から終了までの管理方法|
|第4回層|トランスポート層|通信の信頼性をどう確保するか|
|第3階層|ネットワーク層|ネットワーク同士の中継方法の管理|
|第2階層|データリンク層|同一ネットワーク内での通信方法の管理|
|第1階層|物理層|物理的な繋ぎ方の管理|

階層の数字が高い方を上位層と呼び、低い方を下位層と呼ぶ。階層に分けることによるメリットはプロトコルの一部改変の際に差し替える機能の参照が容易になるからである。

現在はインターネットの世界でデファクトスタンダードとなっている**TCP/IP**というプロトコルが広く利用されている。

## ネットワークを構成する装置
### LANの装置とOSI基本参照モデルの関係
以下の表にLANの装置とOSI基本参照モデルの関係を示す。

|階層数|階層名|装置|
|--|--|--|
|第7階層|アプリケーション層|ゲートウェイ|
|第6階層|プレゼンテーション層|ゲートウェイ|
|第5階層|セッション層|ゲートウェイ|
|第4回層|トランスポート層|ゲートウェイ|
|第3階層|ネットワーク層|ルータ|
|第2階層|データリンク層|ブリッジ|
|第1階層|物理層|NIC, LANケーブル, リピータ|

### NIC
NICとはコンピュータをネットワークに接続するための拡張カードのこと。
要はLANケーブルを挿す穴がついた装置のことで、これのおかげでLANケーブルを繋いでネットワークに接続できる。

NICをはじめとするネットワーク機器には製造段階で**MACアドレス**という番号が割り振られている。

MACアドレスとはIEEEによって管理される製造メーカー一意の番号であることが保証される。ちなみに先頭の24ビットが製造メーカー番号で後ろの24ビットが製造番号を表す。

### リピータ
リピータは物理層の中継機能を提供する装置でケーブルに流れる電気信号を増幅して、LANの総延長距離を伸ばすことができる。

LANの規格では、方式ごとにケーブルの総延長距離が定められている。
それ以上の距離で通信すると信号が歪んでしまう問題が発生する。
リピータを間に挟むと信号を整形して再送出してくれるので信号の歪みを解消することができる。

### ブリッジ
ブリッジはデータリンク層の中継機能を提供する装置で、セグメント間の中継役として流れてきたパケットのMACアドレス情報を確認、必要に応じて他方のセグメントへパケットを流す役割を持つ。

セグメントとは無条件にデータが流れる範囲(論理的に１本のケーブルでつながっている範囲)のこと。
一つのセグメント内に大量のコンピュータが繋がれているとパケットの衝突(コリジョン)が多発して回線の利用効率が下がる問題が発生する。

ブリッジは流れてくるパケットがセグメント毎にに属するMACアドレスを一覧として記憶することで、セグメント間を渡る必要のあるパケットだけ中継を行うことができる。
中継パケットはCSMA/CD方式に従っているためコリジョンの発生が抑制されるのでネットワークの利用率向上に役立つ。

### ルータ
ルータはネットワーク層の中継機能を提供する装置のこと。
異なるLAN同士の中継役として流れてきたパケットのIPアドレス情報を確認した後に最適な経路へパケットを転送する。

ブリッジが行う転送はMACアドレスが確認できる範囲でのみ有効なため、外のLAN宛のパケットを中継することができない。
ルータはパケットに付属するIPアドレスを自身が持つ**ルーティングテーブル**と突き合わせて最適な経路選択(ルーティング)を行う。

ちなみIPアドレスとはネットワーク上の機器を識別するために割り当てられた情報のこと。
### ゲートウェイ
ゲートウェイとはトランスポート層以上が異なるネットワーク間でプロトコル変換による中継機能を提供する装置のこと。

ゲートウェイのおかげで携帯メールとインターネットの電子メールが互いにやり取りできたりする。


## TCP/IPを利用したネットワーク
### 
### 
### 
### 
### 
### 


