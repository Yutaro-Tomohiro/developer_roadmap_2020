# インデックス

## インデックスとは

インデックスとは検索の対象としてよく使用するカラムの値だけを取り出して検索しやすいようにしておいたもの。

例えば、以下のようなテーブルがあったとする。

| id  | name      | address |
| --- | --------- | ------- |
| 1   | Suzuki    | Tokyo   |
| 2   | Takahashi | Osaka   |
| 3   | Honda     | Fukuoka |
| 4   | Morita    | Sapporo |
| 5   | Sano      | Nagoya  |

この時、ある name カラムの値を検索するとき、順に検索していく。

これが、データが数百万もある場合は頭から順に調べていくのは非常に効率が悪い。

このような時に、インデックスを作成すると検索が高速になる場合がある。

例えば name カラムの値を対象としたインデックスを作成すると次のようなものになる。

| id  | name      |
| --- | --------- |
| 3   | Honda     |
| 4   | Morita    |
| 5   | Sano      |
| 1   | Suzuki    |
| 2   | Takahashi |

このインデックスは id カラムと name カラムの値だけを保持し、name カラムの値を昇順に並び替えてデータを保存している。

高速に検索する方法として、**B-Tree 方式**や**関数方式**などの方法がある。

## index のデメリット

インデックスはテーブルとは別に独自のデータを持っていることから、テーブルにデータを追加した際に、インデックスはデータを追加し、並び替える作業が必要となる。

そのため、データを追加するときの処理が遅くなる。

また、検索されることがあまりないカラムや格納されるデータが少ない場合にインデックスを作成しても意味があまりない。

## まとめ

- インデックスとはよく検索されるカラムを別のデータとして保存し、検索しやすくする手法のこと
- インデックスのメリットは特定のカラムの値の検索が高速になること
- インデックスのデメリットはテーブルとは別にデータを保持することから、値を追加する作業は遅くなること、検索頻度が少ないカラムやデータ数が少ないものにインデックスを作成してもあまり意味がないことの 2 つがある

## 参考文献

インデックスの意味とメリット・デメリット | DBOnline (最終閲覧日：2021 年 1 月 4 日）
