# Data Replication

## レプリケーションとは

レプリケーションとは「複製(レプリカ)を作ること」という意味でデータベースを複製する機能こと。

RDBMS の多くにはレプリケーション機能が備わっており、主な目的は以下の２つである。

- スケールアウト
- 可用性

## スケールアウト

データベースの性能を拡張は**Vertical Scaling(縦方向の拡張)**と**Horizontal Scaling(横方向の拡張)**の２つがある。

Vertical Scaling はデータベースのサーバ自体の処理能力を増強する手法のことで、スケールアップとも言う。

Horizontal Scaling はサーバーの台数を増やして、処理能力を向上させる手法のことでこれをスケールアウトという。

レプリケーション機能を使って同じデータベースを複数作り、処理を分散させることで処理能力を向上させることができる。

例えば、マスターの DB と複数のレプリケーションで作られた db(スレーブと呼ぶ)があるとする。

書き込みはマスターに任せ、読み込みはそれぞれのスレーブに分散させることで、処理を分散するシステムを構築できる。

※シングルマスタレプリケーションと呼ばれる構成

## 可用性

データベースの複製があることで、通常使用しているサーバがダウンしてもアクセス先を複製したデータベースに変更すれば、サービスを継続させることができる。

この時、通常使用している方をプライマリ、待機している方をスタンバイと呼ぶ。

さらに複製側は稼働状態よって、コールドスタンバイ、ウォームスタンバイ、ホットスタンバイといった区別がされる。

## まとめ

- レプリケーションとはデータベースの複製を作る機能のこと
- データベースを複製して処理を分散させることで、システムの性能を向上させるスケールアウトができる
- 障害が起きてもアクセスを複製したデータベースに向けることで、サービスを継続させることができるため、可用性が向上する

## 参考文献

LPI-JAPAN OSS-DB | A レプリケーションについて(その 1)
(最終閲覧日：2021 年 1 月 21 日）
https://oss-db.jp/dojo/dojo_10

MySQL | スケールアウトのためにレプリケーションを使用する
(最終閲覧日：2021 年 1 月 21 日）
https://dev.mysql.com/doc/refman/5.6/ja/replication-solutions-scaleout.html#figure_replication-scaleout

データベース アクセス ブログ | スケールアップ とスケールアウト
(最終閲覧日：2021 年 1 月 21 日）
https://www.climb.co.jp/blog_dbmoto/archives/4810
